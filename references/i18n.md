# Odoo Internationalization (i18n) Reference

## Table of Contents
- [Overview](#overview)
- [Directory Structure](#directory-structure)
- [Marking Strings for Translation](#marking-strings-for-translation)
- [POT File Generation](#pot-file-generation)
- [PO File Format](#po-file-format)

## Overview

Odoo uses GNU gettext `.po` files for translations. The `i18n/` directory holds:
- `module_name.pot` — Template file with all translatable strings
- `<lang_code>.po` — Translated strings per language (e.g., `es.po`, `fr.po`, `pt_BR.po`)

## Directory Structure

```
i18n/
├── module_name.pot    # Source template (auto-generated)
├── es.po              # Spanish
├── fr.po              # French
├── de.po              # German
└── pt_BR.po           # Brazilian Portuguese
```

No `__manifest__.py` entry needed — Odoo auto-discovers `i18n/` files.

## Marking Strings for Translation

### Python

```python
from odoo import _, models, fields

class LibraryBook(models.Model):
    _name = 'library.book'

    # Field labels are auto-translated via 'string' parameter
    name = fields.Char(string='Title')

    # Use _() for dynamic messages
    def action_borrow(self):
        if self.state != 'available':
            raise UserError(_("Book '%s' is not available for borrowing.", self.name))
        self.message_post(body=_("Book has been borrowed."))
```

### XML

Field labels, menu names, button strings, and view strings are automatically translatable. No special markup needed:

```xml
<field name="name" string="Title"/>
<button name="action_borrow" string="Borrow"/>
<menuitem name="Library"/>
```

For translatable text in QWeb templates:
```xml
<p>This text is automatically translatable in QWeb</p>
```

### JavaScript (Odoo 17)

```javascript
import { _t } from "@web/core/l10n/translation";

const message = _t("Book borrowed successfully");
```

### JavaScript (Odoo 16)

```javascript
const { _t } = require("web.core");
const message = _t("Book borrowed successfully");
```

## POT File Generation

Generate via Odoo CLI or from the UI:

### From Odoo UI
Settings → Translations → Export Translation → Select module → POT format

### From CLI
```bash
./odoo-bin --modules=library_management --i18n-export=i18n/library_management.pot -d mydb --stop-after-init
```

## PO File Format

```po
# Translation of Odoo Server.
# This file contains the translation of the following modules:
#   * library_management
#
msgid ""
msgstr ""
"Project-Id-Version: Odoo Server 17.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2024-01-01 00:00+0000\n"
"PO-Revision-Date: 2024-01-01 00:00+0000\n"
"Language: es\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. module: library_management
#: model:ir.model.fields,field_description:library_management.field_library_book__name
msgid "Title"
msgstr "Título"

#. module: library_management
#: code:addons/library_management/models/library_book.py:0
#, python-format
msgid "Book '%s' is not available for borrowing."
msgstr "El libro '%s' no está disponible para préstamo."
```

Each entry has:
- `#.` — Comment (source/context info)
- `msgid` — Original English string
- `msgstr` — Translated string (empty in `.pot`, filled in `.po`)
